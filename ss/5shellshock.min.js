/*VERSION:0.39.6*/

window._utils = {};
window._utils.requirelib = async function(url, global){
  return new Promise(async function(resolve){
    async function getCode(){
      var xmlHttp = new XMLHttpRequest();
      xmlHttp.open( "GET", url, false );
      xmlHttp.send( null );
      return xmlHttp.responseText;
    }
    let code = await getCode();

    if (global){
      code += 'window["' + global + '"] = ' + global + ';';
    }
    let evaluateCode = new Function(code);
    evaluateCode();
    resolve('done');
  });
};

window._utils.requirelib('https://unpkg.com/guify@0.12.0/lib/guify.min.js').then(() => { 
  window.jeff.loadGui();
});

window.jeff = {
  loadGui: ()=>{},
  modMenu: { 
    credit: {},
    firstFolder: {
      hexColor: '#00FF00',
      container: {
        label: {},
        color: {}
      }
    }
  },
  gui: {},
};

window.jeff.loadGui = function(){
  
  window.jeff.gui = new guify({
    title: 'JeffWare 0.0.0',
    theme: 'light',
    align: 'right',
    barMode: 'none',
    opacity: 0.95,
    open: true,
  });
  
  jeff.modMenu.firstFolder.container.label = jeff.gui.Register({
    type: 'folder',
    label: 'First Folder',
    open: false
  });
  
  jeff.modMenu.firstFolder.container.color = jeff.gui.Register({
    type: 'color',
    label: 'Hex Color',
    format: 'hex',
    object: jeff.modMenu.firstFolder,
    property: 'hexColor',
    folder: 'First Folder'
  });
  
  jeff.modMenu.credit = jeff.gui.Register({
    type: 'text',
    label: 'Credits'
  });
  
  window.jeff.modMenu.credit.container.innerHTML = `<p style="color:black;font-size: medium;margin-bottom: 0px;padding-left: 15px;">Hey</p>`

  let titleTextElm = window.jeff.gui.panel.panel.childNodes[0];
  titleTextElm.style.color = "black";
  titleTextElm.style.fontWeight = "bold";
}
                            
let codeVersion = "0.39.7";
let gameVersion = window.version;
if (codeVersion != gameVersion){
  alert(`JeffWare Code Version does not match ShellShockers current version

JeffWare Version: ${codeVersion}
Game Version: ${gameVersion}`);
}
